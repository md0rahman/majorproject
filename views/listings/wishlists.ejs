<!-- views/listings/wishlists.ejs -->

<style>
  /* ✅ Extra Small Devices (phones <576px) */
  @media (max-width: 576px) {
    .listing-card {
      border-radius: 10px;
    }

    .listing-card img {
      height: 14rem !important;
    }

    .card-body h5 {
      font-size: 0.9rem;
    }

    .card-body p {
      font-size: 0.75rem;
    }
  }

  /* ✅ Small Devices (≥576px and <768px) */
  @media (min-width: 576px) and (max-width: 768px) {
    .listing-card img {
      height: 14rem !important;
    }

    .card-body h5 {
      font-size: 1rem;
    }

    .card-body p {
      font-size: 0.85rem;
    }
  }

  /* ✅ Medium Devices (≥768px and <992px) */
  @media (min-width: 768px) and (max-width: 992px) {
    .listing-card img {
      height: 15rem !important;
    }

    .card-body h5 {
      font-size: 1.05rem;
    }

    .card-body p {
      font-size: 0.9rem;
    }
  }

  /* ✅ Large Devices (≥992px and <1200px) */
  @media (min-width: 992px) and (max-width: 1200px) {
    .listing-card img {
      height: 17rem !important;
    }

    .card-body h5 {
      font-size: 1.1rem;
    }

    .card-body p {
      font-size: 0.95rem;
    }
  }

  /* ✅ Extra Large Devices (≥1200px) */
  @media (min-width: 1200px) {
    .listing-card img {
      height: 20rem !important;
    }

    .card-body h5 {
      font-size: 1.2rem;
    }

    .card-body p {
      font-size: 1rem;
    }
  }

  /* ✅ New features styling */
  .listing-features {
    font-size: 0.85rem;
    color: #666;
    margin-top: 0.4rem;
    display: flex;
    align-items: center;
    gap: 0.6rem;
    flex-wrap: wrap;
  }
  .listing-features i {
    color: #ff385c;
  }

  /* Each pill */
.listing-features > span {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  background: #fff;
  border: 1px solid rgba(17,24,39,0.06);
  padding: 0.45rem 0.7rem;
  border-radius: 999px;
  box-shadow: 0 8px 20px rgba(15,23,42,0.04);
  min-height: 34px;
  line-height: 1;
  transition: transform .12s ease, box-shadow .12s ease;
  white-space: nowrap;
}

/* Slight lift on hover */
.listing-features > span:hover {
  transform: translateY(-3px);
  box-shadow: 0 14px 30px rgba(15,23,42,0.07);
}

/* Icon colors — keep semantic & visible */
.listing-features i.fa-star { color: #ffb400; /* warm gold */ }
.listing-features i.fa-location-dot { color: #ff385c; /* primary */ }
.listing-features i.fa-message, .listing-features i.fa-regular { color: #6b7280; }

/* Make the rating value slightly bolder */
.listing-features .rating-value {
  font-weight: 700;
  color: #111827;
}

/* Compact on very small screens */
@media (max-width: 420px) {
  .listing-features { gap: 0.35rem; font-size: 0.88rem; }
  .listing-features > span { padding: 0.32rem 0.55rem; min-height: 30px; }
  .listing-features span .fa-star { font-size: 0.95rem; }
}

.listing-features i {
  color: #d4a300 !important;  /* golden shade */
}
</style>


<div class="container mt-4">
  <h4 class="mb-3">Your Wishlists</h4>

  <% if (!allListings || allListings.length === 0) { %>
    <div class="text-center text-muted mt-5">
      <h5>No items in wishlist yet.</h5>
      <p>Tap the heart on any listing to save it.</p>
    </div>
  <% } else { %>
    <!-- ✅ row-cols-1 for mobile -->
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-2 row-cols-lg-3 g-4">
      <% allListings.forEach(listing => { %>
        <div class="col">
          <a href="/listings/<%= listing._id %>" class="text-decoration-none text-dark">
            <div class="card h-100 position-relative listing-card">

              <!-- Image -->
              <img src="<%= listing.image.url || '/images/default.jpg' %>" 
                   class="card-img-top" 
                   alt="Listing" 
                   style="height: 20rem; object-fit: cover;">

              <!-- ❤️ Heart Icon -->
              <div class="position-absolute top-0 end-0 p-2">
                <i class="fa-solid fa-heart fs-4 heartIcon"
                   data-id="<%= listing._id %>"
                   style="cursor: pointer; color: red;"></i>
              </div>

              <!-- Guest Favorite badge -->
              <div class="position-absolute top-0 start-0 m-2 px-3 py-1 bg-white rounded-pill shadow-sm" style="border-radius:12px; line-height:1.1; height:26px; display:flex; align-items:center;">
              <small class="text-dark fw-bold" style="font-size:11px;"><i class="fa-solid fa-trophy" style="color:#d4a300;"></i>&nbsp;Guest Favorite</small>
            </div>

              <!-- Card Body -->
              <div class="card-body">

                 <!-- ✅ New Features -->
                <div class="listing-features mb-2">
                  <span><i class="fa-solid fa-star"></i> 4.8</span>
                  <span><i class="fa-solid fa-location-dot"></i> <%= listing.location || "Unknown" %></span>
                  <span>120 reviews</span>
                </div>
                <h5 class="card-title mb-2" style="font-size:18px;"><%= listing.title %></h5>
                <p class="card-text text-muted mb-0">
                  ₹ <%= listing.price.toLocaleString("en-IN") %> / night
                </p>
              </div>

            </div>
          </a>
        </div>
      <% }) %>
    </div>
  <% } %>
</div>
