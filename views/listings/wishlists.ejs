<!-- views/listings/wishlists.ejs -->

<style>
  /* ✅ Extra Small Devices (phones <576px) */
  @media (max-width: 576px) {
    .listing-card {
      border-radius: 10px;
    }

    .listing-card img {
      height: 11rem !important; /* aur chhoti image */
    }

    .card-body h5 {
      font-size: 0.9rem; /* thoda chhota title */
    }

    .card-body p {
      font-size: 0.75rem; /* price bhi chhota */
    }
  }

  /* ✅ Small Devices (portrait tablets ≥576px and <768px) */
  @media (min-width: 576px) and (max-width: 768px) {
    .listing-card img {
      height: 13rem !important;
    }

    .card-body h5 {
      font-size: 1rem;
    }

    .card-body p {
      font-size: 0.85rem;
    }
  }

  /* ✅ Medium Devices (landscape tablets ≥768px and <992px) */
  @media (min-width: 768px) and (max-width: 992px) {
    .listing-card img {
      height: 15rem !important;
    }

    .card-body h5 {
      font-size: 1.05rem;
    }

    .card-body p {
      font-size: 0.9rem;
    }
  }

  /* ✅ Large Devices (laptops/desktops ≥992px and <1200px) */
  @media (min-width: 992px) and (max-width: 1200px) {
    .listing-card img {
      height: 17rem !important;
    }

    .card-body h5 {
      font-size: 1.1rem;
    }

    .card-body p {
      font-size: 0.95rem;
    }
  }

  /* ✅ Extra Large Devices (desktops ≥1200px) */
  @media (min-width: 1200px) {
    .listing-card img {
      height: 20rem !important; /* full size */
    }

    .card-body h5 {
      font-size: 1.2rem;
    }

    .card-body p {
      font-size: 1rem;
    }
  }
</style>


<div class="container mt-4">
  <h4 class="mb-3">Your Wishlists</h4>

  <% if (!allListings || allListings.length === 0) { %>
    <div class="text-center text-muted mt-5">
      <h5>No items in wishlist yet.</h5>
      <p>Tap the heart on any listing to save it.</p>
    </div>
  <% } else { %>
    <div class="row row-cols-2 row-cols-md-2 row-cols-lg-3 g-4">
      <% allListings.forEach(listing => { %>
        <div class="col">
          <a href="/listings/<%= listing._id %>" class="text-decoration-none text-dark">
            <div class="card h-100 position-relative listing-card">

              <!-- Image -->
              <img src="<%= listing.image.url || '/images/default.jpg' %>" 
                   class="card-img-top" 
                   alt="Listing" 
                   style="height: 20rem; object-fit: cover;">

              <!-- ❤️ Heart Icon (always red on wishlist page) -->
              <div class="position-absolute top-0 end-0 p-2">
                <i class="fa-solid fa-heart fs-4 heartIcon"
                   data-id="<%= listing._id %>"
                   style="cursor: pointer; color: red;"></i>
              </div>

              <!-- Guest Favorite badge (same style as index) -->
              <div class="position-absolute top-0 start-0 m-2 px-3 py-1 bg-white rounded-pill shadow-sm"
                   style="border-radius: 12px; line-height: 1.1; height: 26px; display: flex; align-items: center;">
                <small class="text-dark fw-bold" style="font-size: 11px;">Guest Favorite</small>
              </div>

              <!-- Card Body -->
              <div class="card-body">
                <h5 class="card-title mb-2"><%= listing.title %></h5>
                <p class="card-text text-muted mb-0">
                  ₹ <%= listing.price.toLocaleString("en-IN") %> / night
                </p>
              </div>

            </div>
          </a>
        </div>
      <% }) %>
    </div>
  <% } %>
</div>
